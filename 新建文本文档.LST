C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 1   


C51 COMPILER V8.18, COMPILATION OF MODULE _建文本文档
OBJECT MODULE PLACED IN 新建文本文档.OBJ
COMPILER INVOKED BY: G:\keil\C51\BIN\C51.EXE 新建文本文档.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>
   2          #include <intrins.h>
   3          #define LCD12864_DATA P0        //并行数据口
   4          sbit LCD12864_RS = P2^7;        //数据/命令选择
   5          sbit LCD12864_RW = P2^6;        //读/写选择
   6          sbit LCD12864_EN = P2^5;        //使能信号
   7          sbit LCD12864_PSB = P2^4;       //并/串接口选择, H并,L串
   8          sbit LCD12864_RST = P2^2;       //复位, L有效
   9          sbit key4=P1^3;
  10          code unsigned char xjtu[]={
  11          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  12          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  13          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  14          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  15          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  16          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  17          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  18          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  19          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  20          0X00,0X00,0X00,0X00,0X00,0X00,0X01,0X80,0X0E,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  21          0X00,0X00,0X00,0X00,0X00,0X00,0X18,0X00,0X00,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,
  22          0X00,0X00,0X00,0X00,0X00,0X00,0X40,0X00,0X02,0X18,0X00,0X00,0X00,0X00,0X00,0X00,
  23          0X00,0X00,0X00,0X00,0X00,0X01,0X00,0X00,0X05,0X04,0X00,0X00,0X00,0X00,0X00,0X00,
  24          0X00,0X00,0X00,0X00,0X00,0X04,0X0C,0X00,0X08,0X81,0X00,0X00,0X00,0X00,0X00,0X00,
  25          0X00,0X00,0X00,0X00,0X00,0X08,0X20,0X80,0X17,0XC0,0XC0,0X00,0X00,0X00,0X00,0X00,
  26          0X00,0X00,0X00,0X00,0X00,0X10,0X10,0X00,0X00,0X40,0X20,0X00,0X00,0X00,0X00,0X00,
  27          0X00,0X00,0X00,0X00,0X00,0X40,0X00,0X23,0X10,0X80,0X10,0X00,0X00,0X00,0X00,0X00,
  28          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X63,0X38,0X00,0X08,0X00,0X00,0X00,0X00,0X00,
  29          0X00,0X00,0X00,0X00,0X00,0X80,0X06,0X7F,0XF9,0X80,0X04,0X00,0X00,0X00,0X00,0X00,
  30          0X00,0X00,0X00,0X00,0X01,0X60,0X07,0X80,0X0F,0X80,0X02,0X00,0X00,0X00,0X00,0X00,
  31          0X00,0X00,0X00,0X00,0X02,0X00,0X66,0X00,0X01,0X90,0X12,0X00,0X00,0X00,0X00,0X00,
  32          0X00,0X00,0X00,0X00,0X00,0X40,0X78,0X00,0X00,0XF8,0XA9,0X00,0X00,0X00,0X00,0X00,
  33          0X00,0X00,0X00,0X00,0X04,0X08,0X30,0X01,0X40,0X30,0X28,0X00,0X00,0X00,0X00,0X00,
  34          0X00,0X00,0X00,0X00,0X00,0X1B,0X60,0X25,0X60,0X12,0X20,0X80,0X00,0X00,0X00,0X00,
  35          0X00,0X00,0X00,0X00,0X08,0X03,0XC0,0X1D,0X70,0X0F,0X20,0X00,0X00,0X00,0X00,0X00,
  36          0X00,0X00,0X00,0X00,0X00,0X01,0X80,0X79,0X58,0X0C,0X00,0X40,0X00,0X00,0X00,0X00,
  37          0X00,0X00,0X00,0X00,0X10,0X01,0X00,0X7D,0X48,0X04,0X00,0X40,0X00,0X00,0X00,0X00,
  38          0X00,0X00,0X00,0X00,0X10,0X0F,0X00,0X7D,0X44,0X07,0X80,0X00,0X00,0X00,0X00,0X00,
  39          0X00,0X00,0X00,0X00,0X10,0X07,0X00,0X00,0X44,0X03,0X80,0X00,0X00,0X00,0X00,0X00,
  40          0X00,0X00,0X00,0X00,0X10,0X02,0X03,0XBF,0XF7,0XC2,0X00,0X00,0X00,0X00,0X00,0X00,
  41          0X00,0X00,0X00,0X00,0X00,0X02,0X03,0XFF,0XF7,0X02,0X00,0X20,0X00,0X00,0X00,0X00,
  42          0X00,0X00,0X00,0X00,0X00,0X0E,0X00,0XBF,0XF0,0X03,0XC0,0X20,0X00,0X00,0X00,0X00,
  43          0X00,0X00,0X00,0X00,0X00,0X02,0X00,0X1F,0XC0,0X03,0X80,0X20,0X00,0X00,0X00,0X00,
  44          0X00,0X00,0X00,0X00,0X00,0X02,0X00,0X0F,0XC0,0X02,0X00,0X20,0X00,0X00,0X00,0X00,
  45          0X00,0X00,0X00,0X00,0X10,0X07,0X01,0X0F,0XC0,0X03,0X00,0X00,0X00,0X00,0X00,0X00,
  46          0X00,0X00,0X00,0X00,0X10,0X0F,0X00,0X1F,0XE0,0X07,0X80,0X00,0X00,0X00,0X00,0X00,
  47          0X00,0X00,0X00,0X00,0X10,0X01,0X02,0X3F,0XF0,0X06,0X00,0X40,0X00,0X00,0X00,0X00,
  48          0X00,0X00,0X00,0X00,0X00,0X01,0X80,0X41,0X48,0X0C,0X00,0X40,0X00,0X00,0X00,0X00,
  49          0X00,0X00,0X00,0X00,0X08,0X03,0XC4,0XE8,0X0E,0X0E,0X00,0X00,0X00,0X00,0X00,0X00,
  50          0X00,0X00,0X00,0X00,0X08,0X03,0X5F,0XE8,0X4E,0X1E,0X00,0X80,0X00,0X00,0X00,0X00,
  51          0X00,0X00,0X00,0X00,0X04,0X00,0X22,0X16,0XB0,0X30,0X00,0X80,0X00,0X00,0X00,0X00,
  52          0X00,0X00,0X00,0X00,0X04,0X00,0X7C,0X00,0X00,0XF0,0X01,0X00,0X00,0X00,0X00,0X00,
  53          0X00,0X00,0X00,0X00,0X02,0X00,0X6C,0X00,0X01,0XB0,0X00,0X00,0X00,0X00,0X00,0X00,
  54          0X00,0X00,0X00,0X00,0X01,0X00,0X07,0X80,0X07,0X00,0X02,0X00,0X00,0X00,0X00,0X00,
  55          0X00,0X00,0X00,0X00,0X01,0X00,0X0E,0XFC,0XFB,0X80,0X04,0X00,0X00,0X00,0X00,0X00,
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 2   

  56          0X00,0X00,0X00,0X00,0X00,0X80,0X00,0X67,0X31,0X00,0X08,0X00,0X00,0X00,0X00,0X00,
  57          0X00,0X00,0X00,0X00,0X00,0X40,0X00,0X67,0X30,0X00,0X10,0X00,0X00,0X00,0X00,0X00,
  58          0X00,0X00,0X00,0X00,0X00,0X20,0X00,0X00,0X00,0X00,0X20,0X00,0X00,0X00,0X00,0X00,
  59          0X00,0X00,0X00,0X00,0X00,0X18,0X00,0X00,0X00,0X88,0X40,0X00,0X00,0X00,0X00,0X00,
  60          0X00,0X00,0X00,0X00,0X00,0X04,0X00,0X00,0X00,0X01,0X80,0X00,0X00,0X00,0X00,0X00,
  61          0X00,0X00,0X00,0X00,0X00,0X03,0X00,0X80,0X00,0X02,0X00,0X00,0X00,0X00,0X00,0X00,
  62          0X00,0X00,0X00,0X00,0X00,0X00,0XC0,0X00,0X20,0X08,0X00,0X00,0X00,0X00,0X00,0X00,
  63          0X00,0X00,0X00,0X00,0X00,0X00,0X10,0X00,0X00,0X60,0X00,0X00,0X00,0X00,0X00,0X00,
  64          0X00,0X00,0X00,0X00,0X00,0X00,0X03,0X00,0X03,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  65          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X1F,0XE0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  66          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  67          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  68          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  69          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  70          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  71          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  72          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  73          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  74          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  75          };
  76          
  77          code unsigned char pksy[]={
  78          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  79          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  80          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  81          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X07,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  82          0X00,0X00,0X00,0X00,0X00,0X00,0X01,0XFF,0XFC,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
  83          0X00,0X00,0X00,0X00,0X00,0X00,0X0F,0X80,0X07,0X80,0X00,0X00,0X00,0X00,0X00,0X00,
  84          0X00,0X00,0X00,0X00,0X00,0X00,0X3C,0X1F,0XE0,0XF0,0X00,0X00,0X00,0X00,0X00,0X00,
  85          0X00,0X00,0X00,0X00,0X00,0X00,0XE3,0XFF,0XFE,0X38,0X00,0X00,0X00,0X00,0X00,0X00,
  86          0X00,0X00,0X00,0X00,0X00,0X01,0X8F,0XFF,0XFF,0XCE,0X00,0X00,0X00,0X00,0X00,0X00,
  87          0X00,0X00,0X00,0X00,0X00,0X07,0X3F,0XFF,0XFF,0X33,0X00,0X00,0X00,0X00,0X00,0X00,
  88          0X00,0X00,0X00,0X00,0X00,0X0C,0XDF,0XFF,0XFF,0X09,0XC0,0X00,0X00,0X00,0X00,0X00,
  89          0X00,0X00,0X00,0X00,0X00,0X19,0X07,0XFF,0XFE,0X26,0XE0,0X00,0X00,0X00,0X00,0X00,
  90          0X00,0X00,0X00,0X00,0X00,0X32,0X87,0XFF,0XFE,0X09,0X70,0X00,0X00,0X00,0X00,0X00,
  91          0X00,0X00,0X00,0X00,0X00,0X65,0X09,0XFF,0XFF,0X10,0XB8,0X00,0X00,0X00,0X00,0X00,
  92          0X00,0X00,0X00,0X00,0X00,0XC8,0X00,0XF0,0X7F,0XE0,0X58,0X00,0X00,0X00,0X00,0X00,
  93          0X00,0X00,0X00,0X00,0X00,0X91,0X40,0X00,0X07,0XE0,0XEC,0X00,0X00,0X00,0X00,0X00,
  94          0X00,0X00,0X00,0X00,0X01,0XA0,0X00,0X1F,0XE1,0XF0,0XA6,0X00,0X00,0X00,0X00,0X00,
  95          0X00,0X00,0X00,0X00,0X03,0X50,0X00,0XC0,0XD8,0XFD,0X02,0X00,0X00,0X00,0X00,0X00,
  96          0X00,0X00,0X00,0X00,0X02,0X54,0X03,0X01,0XC6,0X3F,0X0B,0X00,0X00,0X00,0X00,0X00,
  97          0X00,0X00,0X00,0X00,0X06,0X80,0X04,0X03,0X81,0X9E,0X09,0X00,0X00,0X00,0X00,0X00,
  98          0X00,0X00,0X00,0X00,0X04,0X88,0X08,0X3F,0X00,0XCF,0X1D,0X80,0X00,0X00,0X00,0X00,
  99          0X00,0X00,0X00,0X00,0X0D,0X00,0X10,0XFF,0X18,0X67,0XA0,0X80,0X00,0X00,0X00,0X00,
 100          0X00,0X00,0X00,0X00,0X0D,0X80,0X21,0XFF,0X1C,0X27,0X82,0XC0,0X00,0X00,0X00,0X00,
 101          0X00,0X00,0X00,0X00,0X09,0XC0,0X43,0XFF,0X1E,0X13,0X80,0XC0,0X00,0X00,0X00,0X00,
 102          0X00,0X00,0X00,0X00,0X1B,0XE0,0X47,0XFE,0X3F,0X0B,0XC0,0X40,0X00,0X00,0X00,0X00,
 103          0X00,0X00,0X00,0X00,0X1B,0XF0,0X8F,0XFF,0X3F,0X89,0XC1,0X40,0X00,0X00,0X00,0X00,
 104          0X00,0X00,0X00,0X00,0X1B,0XF8,0X8F,0XFE,0X3F,0XC9,0XCF,0X40,0X00,0X00,0X00,0X00,
 105          0X00,0X00,0X00,0X00,0X13,0XFC,0X1F,0XFC,0X7F,0XC5,0XFF,0X60,0X00,0X00,0X00,0X00,
 106          0X00,0X00,0X00,0X00,0X13,0XFD,0X1F,0XFC,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 107          0X00,0X00,0X00,0X00,0X17,0XFD,0X1F,0XF8,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 108          0X00,0X00,0X00,0X00,0X17,0XFD,0X00,0X00,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 109          0X00,0X00,0X00,0X00,0X17,0XF9,0X00,0X00,0X7F,0XE4,0XFF,0X60,0X00,0X00,0X00,0X00,
 110          0X00,0X00,0X00,0X00,0X17,0XFD,0X00,0X00,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 111          0X00,0X00,0X00,0X00,0X13,0XFD,0X1F,0XFF,0XFF,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 112          0X00,0X00,0X00,0X00,0X13,0XFD,0X00,0X00,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 113          0X00,0X00,0X00,0X00,0X13,0XFC,0X00,0X00,0X7F,0XC4,0XFF,0X60,0X00,0X00,0X00,0X00,
 114          0X00,0X00,0X00,0X00,0X1B,0XFC,0X8F,0XFF,0XFF,0X88,0X3F,0X40,0X00,0X00,0X00,0X00,
 115          0X00,0X00,0X00,0X00,0X1B,0XFE,0X8F,0XFF,0XFF,0X88,0X1E,0X40,0X00,0X00,0X00,0X00,
 116          0X00,0X00,0X00,0X00,0X09,0XFE,0X40,0X00,0X7F,0X10,0X0E,0XC0,0X00,0X00,0X00,0X00,
 117          0X00,0X00,0X00,0X00,0X0D,0XFF,0X40,0X00,0X7E,0X10,0X06,0XC0,0X00,0X00,0X00,0X00,
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 3   

 118          0X00,0X00,0X00,0X00,0X0D,0XFF,0X21,0XFF,0XFC,0X20,0X00,0X80,0X00,0X00,0X00,0X00,
 119          0X00,0X00,0X00,0X00,0X04,0XFF,0X90,0X7F,0XF8,0X40,0X05,0X80,0X00,0X00,0X00,0X00,
 120          0X00,0X00,0X00,0X00,0X06,0XFF,0XC8,0X1F,0XC0,0X80,0X01,0X00,0X00,0X00,0X00,0X00,
 121          0X00,0X00,0X00,0X00,0X02,0X7F,0XE6,0X00,0X01,0X00,0X0B,0X00,0X00,0X00,0X00,0X00,
 122          0X00,0X00,0X00,0X00,0X03,0X7F,0XF1,0X00,0X06,0X00,0X12,0X00,0X00,0X00,0X00,0X00,
 123          0X00,0X00,0X00,0X00,0X01,0XBF,0XF8,0X60,0X38,0X00,0X16,0X00,0X00,0X00,0X00,0X00,
 124          0X00,0X00,0X00,0X00,0X01,0X9F,0XFE,0X0F,0X80,0X00,0X2C,0X00,0X00,0X00,0X00,0X00,
 125          0X00,0X00,0X00,0X00,0X00,0XCF,0XFF,0XC0,0X0C,0X00,0X48,0X00,0X00,0X00,0X00,0X00,
 126          0X00,0X00,0X00,0X00,0X00,0X6F,0XFF,0XFF,0XFE,0X00,0X98,0X00,0X00,0X00,0X00,0X00,
 127          0X00,0X00,0X00,0X00,0X00,0X33,0XFF,0X1F,0XF9,0X01,0X30,0X00,0X00,0X00,0X00,0X00,
 128          0X00,0X00,0X00,0X00,0X00,0X19,0XFF,0X41,0X01,0X82,0X60,0X00,0X00,0X00,0X00,0X00,
 129          0X00,0X00,0X00,0X00,0X00,0X0C,0XFF,0X94,0X00,0XCD,0XC0,0X00,0X00,0X00,0X00,0X00,
 130          0X00,0X00,0X00,0X00,0X00,0X06,0X3E,0X34,0X02,0XF3,0X80,0X00,0X00,0X00,0X00,0X00,
 131          0X00,0X00,0X00,0X00,0X00,0X03,0X9F,0X11,0X09,0XC6,0X00,0X00,0X00,0X00,0X00,0X00,
 132          0X00,0X00,0X00,0X00,0X00,0X00,0XE3,0XFF,0XFF,0X1C,0X00,0X00,0X00,0X00,0X00,0X00,
 133          0X00,0X00,0X00,0X00,0X00,0X00,0X78,0X7F,0XF0,0X70,0X00,0X00,0X00,0X00,0X00,0X00,
 134          0X00,0X00,0X00,0X00,0X00,0X00,0X0F,0X00,0X07,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,
 135          0X00,0X00,0X00,0X00,0X00,0X00,0X03,0XFF,0XFE,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 136          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X1F,0XE0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 137          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 138          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 139          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 140          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 141          0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 142          
 143          };
 144          void Delay(unsigned int n)
 145          {
 146   1          unsigned int i;
 147   1          while(n--)
 148   1          {
 149   2              i=200;
 150   2              while(i--);
 151   2          }
 152   1      }
 153          
 154          bit BusyCheck(void)
 155          {
 156   1          bit BusyBit;
 157   1          
 158   1          LCD12864_DATA = 0xFF;
 159   1          LCD12864_RS = 0;
 160   1          LCD12864_RW = 1;
 161   1          LCD12864_EN = 1;
 162   1          _nop_();
 163   1          BusyBit = (bit)(LCD12864_DATA>>7);
 164   1          LCD12864_EN = 0;
 165   1          return BusyBit;
 166   1      }
 167          
 168          /**********************************************
 169              写命令到LCD12864
 170          **********************************************/
 171          void CommandWrite12864(unsigned char CmdByte)
 172          {
 173   1          while(BusyCheck());             //等待忙
 174   1          LCD12864_RS = 0;
 175   1          LCD12864_RW = 0;
 176   1          LCD12864_EN = 1;
 177   1          LCD12864_DATA = CmdByte;
 178   1          _nop_();
 179   1          LCD12864_EN = 0;
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 4   

 180   1      }
 181          
 182          /**********************************************
 183              写数据到LCD12864
 184          **********************************************/
 185          void DataWrite12864(unsigned char DataByte)
 186          {
 187   1          while(BusyCheck());             //等待忙
 188   1          LCD12864_RS = 1;
 189   1          LCD12864_RW = 0;
 190   1          LCD12864_EN = 1;
 191   1          LCD12864_DATA = DataByte;
 192   1          _nop_();
 193   1          LCD12864_EN = 0;
 194   1      }
 195          
 196          /**********************************************
 197          功能：
 198              初始化LCD12864
 199          **********************************************/
 200          void Reset12864(void)
 201          {
 202   1              LCD12864_PSB = 1;               //选择并口传输
 203   1              CommandWrite12864(0x30);        //选择基本指令集
 204   1              CommandWrite12864(0x0c);        //开显示(无游标、不反白)
 205   1              CommandWrite12864(0x01);        //清除显示，并且设定地址指针为00H
 206   1              CommandWrite12864(0x06);        //指定在资料的读取及写入时，设定游标的移动方向及指定显示的移位
 207   1      }
 208          
 209          /**********************************************
 210          功能：
 211              清屏
 212          **********************************************/
 213          void ScreenClear12864(void)
 214          {
 215   1          CommandWrite12864(0x01);
 216   1      }
 217          
 218          /**********************************************
 219          功能：
 220              在指定坐标显示字符串
 221          输入参数：
 222              x: 横坐标(0――15)
 223              y: 纵坐标(0――1)
 224              String: 字符串
 225          **********************************************/
 226          void StringDisplay12864(unsigned char x, unsigned char y, unsigned char *String)
 227          {
 228   1          if((x<8)&&(y<4))
 229   1          {
 230   2              //指定数据地址
 231   2              switch(y)
 232   2              {
 233   3                  case 0:
 234   3                      CommandWrite12864(0x80|0x00|x);
 235   3                      break;
 236   3                  case 1:
 237   3                      CommandWrite12864(0x80|0x10|x);
 238   3                      break;
 239   3                  case 2:
 240   3                      CommandWrite12864(0x80|0x08|x);
 241   3                      break;
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 5   

 242   3                  case 3:
 243   3                      CommandWrite12864(0x80|0x18|x);
 244   3                      break;
 245   3              }
 246   2              //显示字符串
 247   2              while(*String != '\0')
 248   2              {
 249   3                  DataWrite12864(*String);
 250   3                  Delay(50);
 251   3                  String++;
 252   3              }
 253   2          }
 254   1      }
 255          
 256          /**********************************************
 257          功能：
 258              显示一整个位图
 259          输入参数：
 260              Picture: 指向位图的指针
 261          **********************************************/
 262          void PictureDisplay12864(unsigned char code *Picture)
 263          {
 264   1          unsigned char i,j,k;
 265   1          
 266   1          /* 选择扩展指令集，并关闭绘图显示 */
 267   1              CommandWrite12864(0x34);
 268   1              CommandWrite12864(0x34);
 269   1          /* 将位图的所有字节写到液晶的位图RAM中 */
 270   1          for(i=0; i<2; i++)                      //GDRAM分上下两页
 271   1          {
 272   2              for(j=0; j<32; j++)
 273   2              {
 274   3                  /* 写纵坐标y和横坐标x */
 275   3                  CommandWrite12864(0x80+j);      //写GDRAM的坐标y，即第y行
 276   3                  if(i==0)
 277   3                  {
 278   4                      CommandWrite12864(0x80);    //写GDRAM的坐标x（上页）
 279   4                  }
 280   3                  else
 281   3                  {
 282   4                      CommandWrite12864(0x88);    //写GDRAM的坐标x（下页）
 283   4                  }
 284   3                  /* 将16个字节写入GDRAM */
 285   3                  for(k=0; k<16; k++)
 286   3                  {
 287   4                      DataWrite12864(*Picture++);
 288   4                  }
 289   3              }
 290   2          }
 291   1          /* 打开绘图显示，并选择基本指令集 */
 292   1          CommandWrite12864(0x36);
 293   1          CommandWrite12864(0x30);
 294   1      }
 295          void Delay1(unsigned int n)
 296          {
 297   1          unsigned int i;
 298   1          while(n--)
 299   1          {
 300   2              i=200;
 301   2              while(i--);
 302   2      
 303   2          }
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 6   

 304   1      }
 305          
 306          /*--------------------------------------------------------------------------------------------------------
             --*/
 307          /**********************************************
 308              主函数，实现LCD12864显示功能
 309          **********************************************/
 310          void main()
 311          {       unsigned int x=9;
 312   1          char str[9]="123456789" ;
 313   1              if(x==9)
 314   1       {      str[0]='w';}
 315   1       //  str[1]="45";
 316   1          Reset12864();                           //液晶12864初始化
 317   1          Delay(20); 
 318   1              while(1)
 319   1              {                             //延时,保证显示更稳定
 320   2        //  PictureDisplay12864(xjtu);         //显示Logo图案
 321   2       //   Delay(1000);
 322   2      //      ScreenClear12864();
 323   2      //      Delay(1000);
 324   2        //  PictureDisplay12864(pksy);
 325   2      //      Delay(1000);
 326   2          ScreenClear12864();
 327   2              Delay(1000);
 328   2      //      StringDisplay12864(0,0,"西安交通大学");
 329   2       //   StringDisplay12864(0,1,"小学期计算机项目");
 330   2      //    StringDisplay12864(0,2,"成果展示");
 331   2       //   StringDisplay12864(0,3,"................");
 332   2      //      Delay(1000);
 333   2      //      ScreenClear12864();
 334   2      //      Delay(1000);
 335   2              StringDisplay12864(0,0,str);
 336   2          StringDisplay12864(0,1,"组长张德润");
 337   2          StringDisplay12864(0,2,"组员蒋旭东韩煜航");
 338   2          StringDisplay12864(0,3,"廖逸飞  徐烽");
 339   2          Delay(2000);
 340   2              ScreenClear12864();
 341   2              Delay(1000);
 342   2              StringDisplay12864(1,1,"请按右方向键");
 343   2          StringDisplay12864(2,2,"进入程序");
 344   2      
 345   2              Delay(3000);
 346   2              ScreenClear12864();
 347   2              Delay(1000);
 348   2      
 349   2              if(key4==0)
 350   2                 {    
 351   3               Delay(20);
 352   3                       if(key4==0)
 353   3                       {
 354   4                        break;
 355   4                       }                 
 356   3                 }
 357   2        }
 358   1        P1=0x00;     
 359   1      }
 360          
 361          
 362          
 363          
 364          
C51 COMPILER V8.18   _建文本文档                                                          07/17/2017 01:03:30 PAGE 7   

 365          
 366          
 367          
 368          
 369          
 370          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    486    ----
   CONSTANT SIZE    =   2120    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      16
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
